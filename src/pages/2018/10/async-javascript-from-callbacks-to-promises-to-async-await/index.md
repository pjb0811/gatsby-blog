---
title: ë¹„ë™ê¸° ìë°” ìŠ¤í¬ë¦½íŠ¸ì˜ ì§„í™” - Callbacksì—ì„œ Promises, Async / Await ë¡œ
date: '2018-10-31'
mainImage: './evolutionOfAsync.png'
tags: ['javascript']
translation: {
  title: 'The Evolution of Async JavaScript: From Callbacks, to Promises, to Async/Await',
  link: 'https://tylermcginnis.com/async-javascript-from-callbacks-to-promises-to-async-await/'
}
---

> ì´ëŠ” [Advanced JavaScript](https://tylermcginnis.com/courses/advanced-javascript/) ê³¼ì •ì˜ ì¼ë¶€ì…ë‹ˆë‹¤. ì´ ê²Œì‹œë¬¼ì„ ì›í•œë‹¤ë©´ ê·¸ê²ƒì„ í™•ì¸í•˜ì‹­ì‹œì˜¤.

## ë¹„ë””ì˜¤

<iframe width="864" height="486" src="https://www.youtube.com/embed/gB-OmN1egV8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## í¬ìŠ¤íŠ¸

ì œê°€ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì‚¬ì´íŠ¸ ì¤‘ í•˜ë‚˜ëŠ” [BerkshireHathaway.com](http://www.berkshirehathaway.com/)ì…ë‹ˆë‹¤. ì´ ì‚¬ì´íŠ¸ëŠ” ë‹¨ìˆœí•˜ê³  íš¨ê³¼ì ì´ë©° 1997 ë…„ì— ì‹œì‘í•œ ì´ë˜ë¡œ ê·¸ ì—…ë¬´ë¥¼ ì˜ ìˆ˜í–‰í•´ ì™”ìŠµë‹ˆë‹¤. ë” ë†€ë¼ìš´ ê²ƒì€, ì§€ë‚œ 20 ë…„ ë™ì•ˆ ì´ ì‚¬ì´íŠ¸ê°€ í•œë²ˆë„ ë²„ê·¸ë¥¼ ê°€ì ¸ë³¸ ì ì´ ì—†ì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì™œì¼ê¹Œìš”? ëª¨ë‘ ì •ì ì´ë‹ˆê¹Œìš”. 20 ë…„ ì „ì— ì¶œì‹œ ëœ ì´ë˜ë¡œ ê±°ì˜ ë™ì¼í•©ë‹ˆë‹¤. ëª¨ë“  ë°ì´í„°ê°€ í”„ë¡ íŠ¸ ì˜ì—­ì— ìˆìœ¼ë©´ ì‚¬ì´íŠ¸ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶ˆí–‰íˆë„, ì˜¤ëŠ˜ë‚  ëŒ€ë¶€ë¶„ì˜ ì‚¬ì´íŠ¸ëŠ” ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ì•±ì˜ ì™¸ë¶€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” "íŒ¨í„´"ì„ ê°œë°œí–ˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì´ëŸ¬í•œ íŒ¨í„´ì—ëŠ” ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ë³€ê²½ë˜ëŠ” ì ˆì¶©ì ì´ ìˆìŠµë‹ˆë‹¤. ì´ ê²Œì‹œë¬¼ì—ì„œëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ì„¸ ê°€ì§€ íŒ¨í„´ì¸ `Callbacks`, `Promises`, ë° `Async/Await` ì˜ ì¥ë‹¨ì ì„ ì •ë¦¬í•˜ê³  ì—­ì‚¬ì  ë§¥ë½ì—ì„œ ê·¸ ì¤‘ìš”ì„±ê³¼ ì§„í–‰ì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.

ë¨¼ì € ë°ì´í„° ìˆ˜ì§‘ íŒ¨í„´ì¸ `Callbacks`ì˜ OG ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

## Callbacks

> _ì €ëŠ” ë‹¹ì‹ ì´ ì½œë°±ì— ëŒ€í•´ ì „í˜€ ëª¨ë¥´ê³  ìˆë‹¤ê³  ê°€ì •í•˜ê² ìŠµë‹ˆë‹¤. ì œê°€ ì˜ëª» ìƒê°í•˜ê³  ìˆë‹¤ë©´, ê·¸ëƒ¥ ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ ì£¼ì„¸ìš”._

ì²˜ìŒ í”„ë¡œê·¸ë¨ì„ ë°°ìš¸ ë•Œ í•¨ìˆ˜ê°€ ê¸°ê³„ë¼ê³  ìƒê°í•˜ëŠ”ê²Œ ë„ì›€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ê¸°ê³„ëŠ” ì›í•˜ëŠ” ëª¨ë“  ê²ƒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì…ë ¥ì„ ë°›ì•„ë“¤ì´ê³  ê°’ì„ ë°˜í™˜ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê° ê¸°ê³„ì—ëŠ” () ë²„íŠ¼ì´ ìˆìœ¼ë©°,ì´ ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì—¬ ê¸°ê³„ë¥¼ ì‘ë™ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
function add(x, y) {
  return x + y
}

add(2, 3) // 5 - ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ê¸°ê³„ë¥¼ ì‘ë™ì‹œí‚µë‹ˆë‹¤.
```

**ë‚´ê°€** ë²„íŠ¼ì„ ëˆ„ë¥´ë“ , **ë‹¹ì‹ **ì´ ë²„íŠ¼ì„ ëˆ„ë¥´ë“ , **ì•„ë‹ˆë©´ ë‹¤ë¥¸ ì‚¬ëŒ**ì´ ëˆ„ë¥´ë“  ìƒê´€ì—†ìŠµë‹ˆë‹¤. ì¢‹ë“  ì‹«ë“  ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ ê¸°ê³„ê°€ ì‘ë™í•˜ê²Œ ë©ë‹ˆë‹¤.

```javascript
function add(x, y) {
  return x + y
}

const me = add
const you = add
const someoneElse = add

me(2, 3) // 5 - ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ê¸°ê³„ë¥¼ ì‘ë™ì‹œí‚µë‹ˆë‹¤.
you(2, 3) // 5 - ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ê¸°ê³„ë¥¼ ì‘ë™ì‹œí‚µë‹ˆë‹¤.
someoneElse(2, 3) // 5 - ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ê¸°ê³„ë¥¼ ì‘ë™ì‹œí‚µë‹ˆë‹¤.
```

ìœ„ì˜ ì½”ë“œì—ì„œ `add` í•¨ìˆ˜ë¥¼ `me`, `you` ë° `someoneElse` ì˜ ì„¸ ê°€ì§€ ë³€ìˆ˜ì— í• ë‹¹í•©ë‹ˆë‹¤. ì›ë˜ì˜ `add` ì™€ ìš°ë¦¬ê°€ ìƒì„±í•œ ê°ê°ì˜ ë³€ìˆ˜ê°€ ë©”ëª¨ë¦¬ìƒì˜ ê°™ì€ ì§€ì ì„ ê°€ë¦¬í‚¤ê³  ìˆìŒì„ ì£¼ëª©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ê·¸ë“¤ì€ ë¬¸ì ê·¸ëŒ€ë¡œ ë˜‘ê°™ì€ ì´ë¦„ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ê°€ `me`,`you` ë˜ëŠ” `someoneElse`ë¥¼ í˜¸ì¶œ í•  ë•Œ, ë§ˆì¹˜ `add` ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

ì ì´ì œ `add` ê¸°ê³„ë¥¼ ë‹¤ë¥¸ ê¸°ê³„ë¡œ ì˜®ê¸°ë©´ ì–´ë–¨ê¹Œìš”? () ë²„íŠ¼ì„ ëˆ„ê°€ ëˆ„ë¥´ëŠ”ì§€ëŠ” ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëˆ„ë¥´ë©´ ì‘ë™í•˜ì£ .

```javascript
function add(x, y) {
  return x + y
}

function addFive(x, addReference) {
  return addReference(x, 5) // 15 - ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ê¸°ê³„ë¥¼ ì‘ë™ì‹œí‚µë‹ˆë‹¤.
}

addFive(10, add) // 15
```

ë‹¹ì‹ ì˜ ë‡ŒëŠ” ì´ê±¸ ì¢€ ì´ìƒí•˜ê²Œ ë³´ì•˜ì„ì§€ë„ ëª¨ë¥´ì§€ë§Œ ìƒˆë¡œìš´ ê²ƒì€ ì—†ìŠµë‹ˆë‹¤. `add`ì—ì„œ "ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ”" ëŒ€ì‹  `add`ë¥¼ `addFive` ì— ì „ë‹¬í•˜ê³  `addReference` ë¡œ ì´ë¦„ì„ ë°”ê¾¼ ë‹¤ìŒ "ë²„íŠ¼ ëˆ„ë¥´ê¸°" ë˜ëŠ” í˜¸ì¶œí•©ë‹ˆë‹¤.

ì—¬ê¸°ì„œëŠ” JavaScript ì–¸ì–´ì˜ ëª‡ ê°€ì§€ ì¤‘ìš”í•œ ê°œë…ì„ ì¤‘ì ì ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤. ì²«ì§¸, ë¬¸ìì—´ì´ë‚˜ ìˆ«ìë¥¼ í•¨ìˆ˜ì˜ ì¸ìˆ˜ë¡œ ì „ë‹¬í•  ìˆ˜ìˆëŠ” ê²ƒì²˜ëŸ¼ í•¨ìˆ˜ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ì‘ì—…ì„ ìˆ˜í–‰í•  ë•Œ ì¸ìˆ˜ë¡œì„œ ì „ë‹¬ëœ ê¸°ëŠ¥ì„ `ì½œë°±` í•¨ìˆ˜ë¼ê³  í•˜ë©° ì½œë°± í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ë ¤ëŠ” í•¨ìˆ˜ë¥¼ `ê³ ì°¨ í•¨ìˆ˜`ë¼ê³  í•©ë‹ˆë‹¤.

ì–´íœ˜ê°€ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì— ì œì‹œëœ ê°œë…ê³¼ ì¼ì¹˜í•˜ë„ë¡ ë³€ìˆ˜ì˜ ì´ë¦„ì´ ë³€ê²½ëœ ë™ì¼í•œ ì½”ë“œê°€ ìˆìŠµë‹ˆë‹¤.

```javascript
function add(x, y) {
  return x + y
}

function higherOrderFunction(x, callback) {
  return callback(x, 5)
}

higherOrderFunction(10, add)
```

ì´ íŒ¨í„´ì€ ì–´ë””ì„œë“ ì§€ ìµìˆ™í•  ê²ë‹ˆë‹¤. JavaScript [ë°°ì—´ ë©”ì„œë“œ](https://tylermcginnis.com/javascript-array-methods-you-should-know/)ì„ ì‚¬ìš©í•œ ì ì´ ìˆëŠ” ê²½ìš° ì½œë°±ì„ ì‚¬ìš©í•œ ê²ƒì…ë‹ˆë‹¤. ë§Œì•½ ë‹¹ì‹ ì´ lodash ì„ ì¨ë³¸ ì ì´ ìˆë‹¤ë©´, ë‹¹ì‹ ì€ ì½œë°±ì„ ì‚¬ìš©í•œ ì ì´ ìˆìŠµë‹ˆë‹¤. jQuery ë¥¼ ì‚¬ìš©í•´ë³¸ ì ì´ ìˆë‹¤ë©´ ì½œë°±ì„ ì‚¬ìš©í•œ ì ì´ ìˆìŠµë‹ˆë‹¤.

```javascript
;[1, 2, 3].map(i => i + 5)

_.filter([1, 2, 3, 4], n => n % 2 === 0)

$('#btn').on('click', () => console.log('Callbacks are everywhere'))
```

ì¼ë°˜ì ìœ¼ë¡œ ì½œë°±ì—ëŠ” ë‘ ê°€ì§€ ì‚¬ìš© ì¼€ì´ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸, ì˜ˆì œ `.map` ì™€ `_.filter` ì˜ˆì œì—ì„œ ë³¼ ìˆ˜ìˆëŠ” ê²ƒì€ í•˜ë‚˜ì˜ ê°’ì„ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë°”ê¾¸ëŠ” ë©‹ì§„ ì¶”ìƒí™”ì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” "ì´ë´, ë°°ì—´ê³¼ í•¨ìˆ˜ê°€ ìˆì–´. ê·¸ëŸ¼ ë‚´ê°€ ì¤€ í•¨ìˆ˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒˆë¡œìš´ ê°€ì¹˜ë¥¼ ì–»ì„ ìˆ˜ ìˆì–´".ë¼ê³  ë§í•©ë‹ˆë‹¤. ë‘ ë²ˆì§¸, jQuery ì˜ˆì œì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì€ íŠ¹ì • ì‹œê°„ê¹Œì§€ í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ì§€ì—°ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤. "ì´ë´, ì—¬ê¸° ì´ í•¨ìˆ˜ê°€ ìˆì–´. ID ê°€ `btn` ì¸ ìš”ì†Œë¥¼ í´ë¦­í•  ë•Œë§ˆë‹¤ í˜¸ì¶œí•´". ì´ ë‘ ë²ˆì§¸ ì‚¬ìš© ì‚¬ë¡€ëŠ” "íŠ¹ì • ì‹œê°„ê¹Œì§€ ê¸°ëŠ¥ ì‹¤í–‰ì„ ì§€ì—°"í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì§€ê¸ˆì€ ë™ê¸°ì ì¸ ì˜ˆì œë§Œ ì‚´í´ ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ ê¸€ì˜ ì´ˆë°˜ë¶€ì—ì„œ ì´ì•¼ê¸°í–ˆë“¯ì´, ìš°ë¦¬ê°€ êµ¬ì¶•í•œ ëŒ€ë¶€ë¶„ì˜ ì•±ì—ëŠ” í•„ìš”í•œ ëª¨ë“  ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  ì‚¬ìš©ìê°€ ì•±ê³¼ ìƒí˜¸ ì‘ìš©í•  ë•Œ ì™¸ë¶€ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë°©ê¸ˆ ì–´ë–»ê²Œ ì½œë°±ì´ ì´ê²ƒì˜ í›Œë¥­í•œ í™œìš© ì‚¬ë¡€ê°€ ë  ìˆ˜ ìˆëŠ”ì§€ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì½œë°±ì€ "íŠ¹ì • ì‹œê°„ê¹Œì§€ ê¸°ëŠ¥ì˜ ì‹¤í–‰ì„ ì§€ì—°ì‹œí‚¬ ìˆ˜ ìˆê²Œ" í•´ì£¼ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë°ì´í„° ê°€ì ¸ ì˜¤ê¸° ì‘ì—…ì„ ìœ„í•´ ì´ ë¬¸ì¥ì„ ì–´ë–»ê²Œ ì ìš© í•  ìˆ˜ ìˆëŠ”ì§€ ë³´ë ¤ê³  ìƒìƒë ¥ì„ ë§ì´ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤. íŠ¹ì • ì‹œê°„ê¹Œì§€ í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ì§€ì—°ì‹œí‚¤ëŠ” ëŒ€ì‹ , í•„ìš”í•œ ë°ì´í„°ê°€ìˆì„ ë•Œê¹Œì§€ í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ì§€ì—°ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë§ˆë„ ê°€ì¥ ëŒ€ì¤‘ì ì¸ ì˜ˆì¸ jQuery ì˜ `getJSON` ë©”ì†Œë“œê°€ ì—¬ê¸° ìˆìŠµë‹ˆë‹¤.

```javascript
// updateUI ë° showErrorëŠ” ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.
// ê·¸ë“¤ì€ ë§í•˜ëŠ” ëŒ€ë¡œ í•˜ëŠ” ì²™ë§Œ í•©ë‹ˆë‹¤.

const id = 'tylermcginnis'

$.getJSON({
  url: `https://api.github.com/users/${id}`,
  success: updateUI,
  error: showError,
})
```

ì‚¬ìš©ì ë°ì´í„°ê°€ ìˆì–´ì•¼ ì•±ì˜ UI ë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? ìš°ë¦¬ëŠ” ì´ë ‡ê²Œ ë§í•©ë‹ˆë‹¤. "ì´ë´, ì—¬ê¸°ì— ê°ì²´ê°€ ìˆì–´. ìš”ì²­ì´ ì„±ê³µí•˜ë©´ ê³„ì† ì§„í–‰í•´ `success`ì„ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì „ë‹¬í•´. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ ê°œì²´ë¥¼ ì „ë‹¬í•˜ì—¬ `error`ë¥¼ í˜¸ì¶œí•´. ê° ë©”ì†Œë“œê°€ í•˜ëŠ” ì¼ì— ëŒ€í•´ ê±±ì •í•  í•„ìš”ëŠ” ì—†ì–´". ì´ê²ƒì€ ë¹„ë™ê¸° ìš”ì²­ ì‹œ ì½œë°± ì‚¬ìš©ì— ëŒ€í•œ ì™„ë²½í•œ ë°ëª¨ì…ë‹ˆë‹¤.

---

ì´ ì‹œì ì—ì„œ ìš°ë¦¬ëŠ” ì½œë°±ì´ ë¬´ì—‡ì¸ì§€, ë™ê¸° ë° ë¹„ë™ê¸° ì½”ë“œ ëª¨ë‘ì—ì„œ ì–´ë–»ê²Œ ì½œë°±ì´ ìœ ìµí•œì§€ë¥¼ ë°°ì› ìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ì•„ì§ ì´ì•¼ê¸°í•˜ì§€ ì•Šì€ ê²ƒì€ ì½œë°±ì˜ ì–´ë‘ìš´ ì¸¡ë©´ì…ë‹ˆë‹¤. ì•„ë˜ì—ì„œ ì´ ì½”ë“œë¥¼ ì‚´í´ë³´ì‹­ì‹œì˜¤. ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ì§€ ë§í•´ì¤„ ìˆ˜ ìˆë‚˜ìš”?

```javascript
// updateUI, showError ë° getLocationURLì€ ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.
// ê·¸ë“¤ì€ ë§í•˜ëŠ” ëŒ€ë¡œ í•˜ëŠ” ì²™ë§Œ í•©ë‹ˆë‹¤.

const id = 'tylermcginnis'

$('#btn').on('click', () => {
  $.getJSON({
    url: `https://api.github.com/users/${id}`,
    success: user => {
      $.getJSON({
        url: getLocationURL(user.location.split(',')),
        success(weather) {
          updateUI({
            user,
            weather: weather.query.results,
          })
        },
        error: showError,
      })
    },
    error: showError,
  })
})
```

ë„ì›€ì´ ëœë‹¤ë©´ [ì—¬ê¸°ì—ì„œ ë¼ì´ë¸Œ ë²„ì „](https://codesandbox.io/s/v06mmo3j7l)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ëª‡ ê²¹ì˜ ì½œë°±ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ë¨¼ì € ID ê°€ `btn` ì¸ ìš”ì†Œë¥¼ í´ë¦­í•  ë•Œê¹Œì§€ëŠ” ì´ˆê¸° AJAX ìš”ì²­ì„ ì‹¤í–‰í•˜ì§€ ë§ì•„ì•¼ í•©ë‹ˆë‹¤. ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì²« ë²ˆì§¸ ìš”ì²­ì„ í•©ë‹ˆë‹¤. ìš”ì²­ì´ ì„±ê³µí•˜ë©´ ë‘ ë²ˆì§¸ ìš”ì²­ì„ í•©ë‹ˆë‹¤. í•´ë‹¹ ìš”ì²­ì´ ì„±ê³µí•˜ë©´ ë‘ ìš”ì²­ì—ì„œ ì–»ì€ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” updateUI ë©”ì„œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ì²˜ìŒì— ë³¸ ì½”ë“œë¥¼ ì´í•´í–ˆëŠ”ì§€ ì—¬ë¶€ì— ìƒê´€ì—†ì´, ê°ê´€ì ìœ¼ë¡œ ì´ì „ ì½”ë“œë³´ë‹¤ ì½ê¸°ê°€ í›¨ì”¬ ë” ì–´ë µìŠµë‹ˆë‹¤. ì´ê²ƒì€ "ì½œë°± ì§€ì˜¥"ì´ë¼ëŠ” ì£¼ì œë¡œ ìš°ë¦¬ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.

ì¸ê°„ìœ¼ë¡œì„œ ìš°ë¦¬ëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ìˆœì°¨ì ìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤. ì¤‘ì²© ì½œë°± ë‚´ë¶€ì— ì¤‘ì²© ì½œë°±ì´ ìˆìœ¼ë©´ ìì—°ìŠ¤ëŸ¬ìš´ ì‚¬ê³  ë°©ì‹ì—ì„œ ë²—ì–´ë‚˜ê²Œ ë©ë‹ˆë‹¤. ë²„ê·¸ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì½íˆëŠ” ë°©ë²•ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ìƒê°í•˜ëŠ” ë°©ì‹ ì‚¬ì´ì— ì—°ê²°ì´ ëŠê¸¸ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

ì†Œí”„íŠ¸ì›¨ì–´ ë¬¸ì œì— ëŒ€í•œ ëŒ€ë¶€ë¶„ì˜ ì†”ë£¨ì…˜ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ "ì½œë°± ì§€ì˜¥"ì„ ì‚¬ìš©í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ì¼ë°˜ì ìœ¼ë¡œ ê·œì •ëœ ì ‘ê·¼ ë°©ì‹ì€ ì½”ë“œë¥¼ ëª¨ë“ˆí™”í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```javascript
function getUser(id, onSuccess, onFailure) {
  $.getJSON({
    url: `https://api.github.com/users/${id}`,
    success: onSuccess,
    error: onFailure,
  })
}

function getWeather(user, onSuccess, onFailure) {
  $.getJSON({
    url: getLocationURL(user.location.split(',')),
    success: onSuccess,
    error: onFailure,
  })
}

$('#btn').on('click', () => {
  getUser(
    'tylermcginnis',
    user => {
      getWeather(
        user,
        weather => {
          updateUI({
            user,
            weather: weather.query.results,
          })
        },
        showError
      )
    },
    showError
  )
})
```

ë„ì›€ì´ ëœë‹¤ë©´ [ì—¬ê¸°ì—ì„œ ë¼ì´ë¸Œ ë²„ì „](https://codesandbox.io/s/m587rq0lox)ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¢‹ì•„ìš”, í•¨ìˆ˜ëª…ì€ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ì§€ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë˜ì§€ë§Œ, ê°ê´€ì ìœ¼ë¡œ "ë” ë‚˜ì€" ê±´ê°€ìš”? ë³„ë¡œìš”. ìš°ë¦¬ëŠ” "ì½œë°± ì§€ì˜¥" ì˜ ê°€ë…ì„± ë¬¸ì œì— ëŒ€í•´ ë°˜ì°½ê³ ë¥¼ ì¼ìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ìˆœì°¨ì ìœ¼ë¡œ ìƒê°í•˜ëŠ” ë¬¸ì œê°€ ì—¬ì „íˆ ì¡´ì¬í•˜ë©°, ì¶”ê°€ ê¸°ëŠ¥ì´ ìˆë”ë¼ë„ ì¤‘ì²© ëœ ì½œë°±ìœ¼ë¡œ ì¸í•´ ìˆœì°¨ì  ì‚¬ê³  ë°©ì‹ì—ì„œ ë²—ì–´ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

ì½œë°±ì˜ ë‹¤ìŒ ë¬¸ì œëŠ” [ì œì–´ì˜ ì—­ì „](https://en.wikipedia.org/wiki/Inversion_of_control)ê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤. ì½œë°±ì„ ì‘ì„±í•  ë•Œ, ì½œë°±ì„ ì£¼ê³ ìˆëŠ” í”„ë¡œê·¸ë¨ì´ ì±…ì„ì´ ìˆìœ¼ë©° í”„ë¡œê·¸ë¨ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™ í•  ë•Œ(ì˜ˆì •ë˜ì–´ ìˆì„ ë•Œ) í˜¸ì¶œ í•  ê²ƒì´ë¼ê³  ê°€ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¼ë³¸ì ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì˜ ì œì–´ë¥¼ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒì…ë‹ˆë‹¤. jQuery, lodash ë˜ëŠ” ì‹¬ì§€ì–´ vanilla JavaScript ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë‹¤ë£¨ëŠ” ê²½ìš° ì •í™•í•œ ì¸ìˆ˜ë¡œ ì˜¬ë°”ë¥¸ ì‹œê°„ì— ì½œë°± í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤ê³  ê°€ì •í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë§ì€ íƒ€ì‚¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ê²½ìš° ì½œë°± í•¨ìˆ˜ëŠ” ì‚¬ìš©ìê°€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ì‹ì„ ë‚˜íƒ€ë‚´ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. íƒ€ì‚¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì˜ë„ì ì´ë“  ì‹¤ìˆ˜ë¡œë“  ê°„ì— ì½œë°±ê³¼ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ì‹ì„ ê¹¨ëœ¨ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
function criticalFunction() {
  // ì´ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê³  ì˜¬ë°”ë¥¸ ì¸ìˆ˜ë¥¼ ê°–ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
}

thirdPartyLib(criticalFunction)
```

ë‹¹ì‹ ì€ `criticalFunction` ì„ í˜¸ì¶œí•˜ëŠ” ì‚¬ëŒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì—, ì–¸ì œ ì–´ë–¤ ì¸ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ”ì§€ë¥¼ ì œì–´ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ë¬¸ì œëŠ” ì•„ë‹ˆì§€ë§Œ í° ë¬¸ì œì¼ ë•Œê°€ ìˆìŠµë‹ˆë‹¤.

---

## Promises

ë‹¹ì‹ ì€ ì˜ˆì•½ ì—†ì´ ë°”ìœ ì‹ë‹¹ì— ê°€ë³¸ ì ì´ ìˆë‚˜ìš”? ì´ëŸ° ì¼ì´ ì¼ì–´ë‚  ë•Œ, ì‹ë‹¹ì€ í…Œì´ë¸”ì´ ì—´ë¦´ ë•Œ ë‹¤ì‹œ ì—°ë½í•  ë°©ë²•ì´ í•„ìš”í•©ë‹ˆë‹¤. ì—­ì‚¬ì ìœ¼ë¡œ, ì‹íƒì´ ì¤€ë¹„ë˜ì—ˆì„ ë•Œ ê·¸ë“¤ì€ ë‹¨ì§€ ì—¬ëŸ¬ë¶„ì˜ ì´ë¦„ì„ ë¶€ë¥´ê³¤ í–ˆìŠµë‹ˆë‹¤. ì´ í›„ ìì—°ìŠ¤ëŸ½ê²Œ ê·¸ë“¤ì€ ìƒê°ì´ í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. í•œ ê°€ì§€ í•´ê²°ì±…ì€, ì—¬ëŸ¬ë¶„ì˜ ì´ë¦„ì„ ê°€ì ¸ê°€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì „í™”ë²ˆí˜¸ë¥¼ ë°›ì•„ í…Œì´ë¸”ì´ ì—´ë¦¬ë©´ ë¬¸ìë¥¼ ë³´ë‚´ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ê²ƒì€ ê·¸ë“¤ì´ ë‹¹ì‹ ì„ ë¶€ë¥´ëŠ” ì†Œë¦¬ë¥¼ ë“£ì§€ ì•Šê²Œ í•´ì£¼ì—ˆì§€ë§Œ ë” ì¤‘ìš”í•œ ê²ƒì€, ê·¸ë“¤ì´ ì›í•  ë•Œë§ˆë‹¤ ê´‘ê³ ë¥¼ í†µí•´ ë‹¹ì‹ ì˜ ì „í™”ê¸°ë¥¼ í‘œì ìœ¼ë¡œ ì‚¼ë„ë¡ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. ìµìˆ™í•˜ê²Œ ë“¤ë¦¬ë‚˜ìš”? ê·¸ë ‡ì£ ! ê·¸ëŸ´ì§€ë„ ëª¨ë¥´ê² ë„¤ìš”. ê·¸ê²ƒì€ ì½œë°±ì„ ìœ„í•œ ì€ìœ ì…ë‹ˆë‹¤! **ì‹ë‹¹ì— ì „í™”ë²ˆí˜¸ë¥¼ ì£¼ëŠ” ê²ƒì€ ì œ 3 ì˜ ì„œë¹„ìŠ¤ì— ì½œë°± ê¸°ëŠ¥ì„ ì£¼ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì´ ì œ 3 ì˜ ì„œë¹„ìŠ¤ê°€ ê·¸ë“¤ì´ ì–¸ì œ ê·¸ë¦¬ê³  ì–´ë–»ê²Œ ê·¸ë“¤ì´ ê·¸ëŸ´ ê²ƒì´ë¼ê³  ë§í•˜ëŠ”ì§€ì— ëŒ€í•œ ë‹¹ì‹ ì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ê²ƒì„ *ì˜ˆìƒ*í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë ˆìŠ¤í† ë‘ì´ ë‹¹ì‹ ì—ê²Œ ë¬¸ìë¥¼ ë³´ë‚¼ ê²ƒì„ *ì˜ˆìƒ*í•©ë‹ˆë‹¤.** í•˜ì§€ë§Œ ì¼ë‹¨ ì—¬ëŸ¬ë¶„ì˜ ì „í™”ë²ˆí˜¸ë‚˜ ì½œë°± ê¸°ëŠ¥ì´ ê·¸ë“¤ì˜ ì†ì— ë“¤ì–´ê°€ë©´, ì—¬ëŸ¬ë¶„ì€ ëª¨ë“  í†µì œê¶Œì„ ìƒê²Œ ë©ë‹ˆë‹¤.

ê³ ë§™ê²Œë„ ì¡´ì¬í•˜ëŠ” ë˜ ë‹¤ë¥¸ ì†”ë£¨ì…˜ì´ ìˆìŠµë‹ˆë‹¤. ì„¤ê³„ ìƒ ëª¨ë“  ì œì–´ ê¶Œí•œì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì „ì— ê²½í—˜ í•œ ì ì´ ìˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤ - ê·¸ê²ƒì€ ê·¸ë“¤ì´ ë‹¹ì‹ ì—ê²Œ ì£¼ëŠ” ì‘ì€ ë²„ì €ì…ë‹ˆë‹¤. ìˆì–ì•„, ì´ê±°.

![buzzy](./buzzy.png)

ì „ì— í•œë²ˆë„ ì‚¬ìš©í•œ ì ì´ ì—†ì–´ë„ ì‚¬ìš©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì´ë¦„ì´ë‚˜ ì „í™” ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹ , ë‹¹ì‹ ì—ê²Œ ì´ ì¥ì¹˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì¥ì¹˜ê°€ ìœ™ìœ™ ê±°ë¦¬ê³  ë¹›ë‚˜ê¸° ì‹œì‘í•˜ë©´ í…Œì´ë¸”ì´ ì¤€ë¹„ë©ë‹ˆë‹¤. í…Œì´ë¸”ì´ ì—´ë¦¬ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ì›í•˜ëŠ” ê²ƒì€ ë¬´ì—‡ì´ë“  í•  ìˆ˜ ìˆì§€ë§Œ, ì´ì œ ì–´ë–¤ ê²ƒë„ í¬ê¸°í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ì‚¬ì‹¤ì€ ì •ë°˜ëŒ€ì…ë‹ˆë‹¤. **ê·¸ë“¤**ì€ **ë‹¹ì‹ **ì—ê²Œ ë­”ê°€ë¥¼ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì œì–´ì˜ ì—­ì „ì€ ì—†ìŠµë‹ˆë‹¤.

ë²„ì €ëŠ” í•­ìƒ `pending`, `fulfilled` ë˜ëŠ” `rejected` ëœ ì„¸ ê°€ì§€ ìƒíƒœ ì¤‘ í•˜ë‚˜ì— ìˆìŠµë‹ˆë‹¤.

`pending`ì€ ê¸°ë³¸ ì´ˆê¸° ìƒíƒœì…ë‹ˆë‹¤. ê·¸ë“¤ì´ ë‹¹ì‹ ì—ê²Œ ë²„ì €ë¥¼ ì¤„ ë•Œ, ê·¸ê²ƒì€ ì´ ìƒíƒœì— ìˆìŠµë‹ˆë‹¤.

`fulfilled`ëŠ” ë²„ì €ê°€ ê¹œë°•ì´ê³  í…Œì´ë¸”ì´ ì¤€ë¹„ë˜ì—ˆì„ ë•Œì˜ ìƒíƒœì…ë‹ˆë‹¤.

`rejected`ëŠ” ë¬´ì–¸ê°€ê°€ ì˜ëª»ë˜ì—ˆì„ ë•Œ ë²„ì €ì˜ ìƒíƒœì…ë‹ˆë‹¤. ì–´ì©Œë©´ ì‹ë‹¹ì´ ë§‰ ë¬¸ì„ ë‹«ì„ ìˆ˜ë„ ìˆê³  ë°¤ì— ì‹ë‹¹ì„ ë¹Œë ¤ ë†“ì€ ì‚¬ëŒì„ ìŠì–´ ë²„ë ¸ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ë‹¤ì‹œ í•œ ë²ˆ ê¸°ì–µí•´ì•¼ í•  ì¤‘ìš”í•œ ì ì€ ë²„ì €ì˜ ìˆ˜ì‹ ìì¸ ë‹¹ì‹ ì´ ëª¨ë“  ì œì–´ ê¶Œí•œì„ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë²„ì €ê°€ `fulfilled`ë˜ë©´ ë‹¹ì‹ ì€ í…Œì´ë¸”ì— ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ë²„ì €ê°€ `fulfilled`ë˜ê³  ì—¬ëŸ¬ë¶„ì´ ê·¸ê²ƒì„ ë¬´ì‹œí•˜ê³  ì‹¶ë‹¤ë©´, ì—¬ëŸ¬ë¶„ì€ ê·¸ë ‡ê²Œ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ `rejected` ë‹¹í•œë‹¤ë©´, ë§›ì€ ì—†ì§€ë§Œ ë‹¤ë¥¸ ê³³ì— ê°€ì„œ ë¨¹ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ì, ì´ì œ ì—¬ëŸ¬ë¶„ì´ ì‹ë‹¹ ë²„ì € ì‚¬ìš©ì˜ ë‹¬ì¸ì´ ë˜ì—ˆìœ¼ë‹ˆ, ê·¸ ì§€ì‹ì„ ì¤‘ìš”í•œ ê²ƒì— ì ìš©í•´ ë´…ì‹œë‹¤.

**ì‹ë‹¹ì— ë‹¹ì‹ ì˜ ë²ˆí˜¸ë¥¼ ì£¼ëŠ” ê²ƒì´ ê·¸ë“¤ì—ê²Œ ì½œë°± ê¸°ëŠ¥ì„ ì£¼ëŠ” ê²ƒê³¼ ê°™ë‹¤ë©´, ì‘ì€ ë²„ì €ì„ ë°›ëŠ” ê²ƒì€ "Promise"ë¼ê³  ë¶ˆë¦¬ëŠ” ê²ƒì„ ë°›ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.**

ì–¸ì œë‚˜ ê·¸ë ‡ë“¯ì´, **ì™œ** ê·¸ëŸ°ì§€ ë¶€í„° ì‹œì‘í•©ì‹œë‹¤. Promise ì€ ì™œ ì¡´ì¬í• ê¹Œìš”? ì´ëŸ¬í•œ ê¸°ëŠ¥ì€ ë¹„ë™ê¸°ì‹ ìš”ì²­ì„ ë”ìš± ê´€ë¦¬í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ê¸° ìœ„í•´ ì¡´ì¬í•©ë‹ˆë‹¤. ì •í™•íˆ ë²„ì €ì™€ ê°™ì´, `Promise` ëŠ” `pending`, `fulfilled` ë˜ëŠ” `rejected` ì¸ ì„¸ ê°€ì§€ ìƒíƒœ ì¤‘ í•˜ë‚˜ì— ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë²„ì €ì™€ ë‹¬ë¦¬, ì´ëŸ¬í•œ ìƒíƒœëŠ” ì‹ë‹¹ì˜ í…Œì´ë¸” ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¹„ë™ê¸°ì‹ ìš”ì²­ì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ë¹„ë™ê¸° ìš”ì²­ì´ ê³„ì† ì§„í–‰ ì¤‘ì´ë©´ `Promise` ì˜ ìƒíƒœëŠ” `pending` ì…ë‹ˆë‹¤. ë¹„ë™ê¸° ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ `Promise`ì˜ ìƒíƒœê°€ `fulfilled`ë¡œ ë³€ê²½ë©ë‹ˆë‹¤. ë¹„ë™ê¸° ìš”ì²­ì´ ì‹¤íŒ¨í•˜ë©´ `Promise`ì˜ ìƒíƒœê°€ `rejected`ë¡œ ë³€ê²½ë©ë‹ˆë‹¤. ë²„ì €ë¼ëŠ” ì€ìœ ëŠ” ê½¤ ì˜ë¯¸ê°€ ìˆì£ , ê·¸ë ‡ì£ ?

`Promise`ê°€ ì¡´ì¬í•˜ëŠ” ì´ìœ ì™€ ê·¸ê²ƒì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ê°€ì§€ ìƒíƒœë¥¼ ì´í•´ í–ˆìœ¼ë¯€ë¡œ ì´ì œ ì„¸ ê°€ì§€ ì§ˆë¬¸ì— ëŒ€ë‹µí•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.

1. ì–´ë–»ê²Œ í•˜ë©´ Promise ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œìš”?
2. Promise ì˜ ìƒíƒœë¥¼ ì–´ë–»ê²Œ ë³€ê²½í• ê¹Œìš”?
3. Promise ì˜ ìƒíƒœê°€ ë°”ë€Œì—ˆì„ ë•Œ ì–´ë–»ê²Œ í• ê¹Œìš”?

### 1) ì–´ë–»ê²Œ í•˜ë©´ Promise ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œìš”?

ì´ê²ƒì€ ê½¤ ì§ê´€ì ì…ë‹ˆë‹¤. `Promise`ì˜ `new` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤.

```javascript
const promise = new Promise()
```

### 2) Promise ì˜ ìƒíƒœë¥¼ ì–´ë–»ê²Œ ë³€ê²½í• ê¹Œìš”?

Promise ìƒì„±ì í•¨ìˆ˜ëŠ” ë‹¨ì¼ ì¸ìˆ˜(ì½œë°±) í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” `resolve` ë° `reject`ë¼ëŠ” ë‘ ê°€ì§€ ì¸ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

`resolve` - promise ì˜ ìƒíƒœë¥¼ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” í•¨ìˆ˜.

`reject` - promise ì˜ ìƒíƒœë¥¼ ê±°ë¶€í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê¸°ëŠ¥.

ì•„ë˜ ì½”ë“œì—ì„œ `setTimeout`ì„ ì‚¬ìš©í•˜ì—¬ 2 ì´ˆë¥¼ ê¸°ë‹¤ë¦° ë‹¤ìŒ `resolve`ì„ í˜¸ì¶œí•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì´í–‰í•  promise ì˜ ìƒíƒœê°€ ë³€ê²½ë©ë‹ˆë‹¤.

```javascript
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve() // ìƒíƒœë¥¼ 'í•´ê²°ë¨'ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
})
```

ìš°ë¦¬ëŠ” promise ë¥¼ ë§Œë“  ì§í›„ ì•½ 2 ì´ˆ í›„ì— `resolve`ì„ í˜¸ì¶œí•œ í›„ ë‹¤ì‹œ promise ë¥¼ í˜¸ì¶œí•¨ìœ¼ë¡œì¨ ì´ëŸ¬í•œ ë³€í™”ë¥¼ ì‹¤ì œë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤

![resolve](./resolve.gif)

promise ê°€ <`pending`>ì—ì„œ <`resolved`>ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.

### 3) Promise ì˜ ìƒíƒœê°€ ë°”ë€Œì—ˆì„ ë•Œ ì–´ë–»ê²Œ í• ê¹Œìš”?

ì œ ì˜ê²¬ìœ¼ë¡œëŠ” ì´ê²ƒì´ ê°€ì¥ ì¤‘ìš”í•œ ì§ˆë¬¸ì…ë‹ˆë‹¤. promise ë¥¼ ë§Œë“¤ê³  ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë°©ë²•ì„ ì•Œë©´ ë©‹ì§€ì§€ë§Œ ìƒíƒœê°€ ë³€ê²½ëœ í›„ì—ëŠ” ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šìœ¼ë©´ ê°€ì¹˜ê°€ ì—†ìŠµë‹ˆë‹¤.

`new Promise`ë¥¼ ë§Œë“¤ ë•Œ, ë‹¹ì‹ ì€ ê·¸ì € í‰ë²”í•œ ì˜¤ë˜ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ ë§Œë“¤ ë¿ì…ë‹ˆë‹¤. ì´ ê°ì²´ëŠ” `then` ì™€ `catch` ì˜ ë‘ ê°€ì§€ ë©”ì†Œë“œë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸° ì—´ì‡ ê°€ ìˆìŠµë‹ˆë‹¤. promise ì˜ ìƒíƒœê°€ `fulfilled`ë¡œ ë°”ë€Œë©´ `.then` ë¡œ ì „ë‹¬ëœ í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤. promise ì˜ ìƒíƒœê°€ `rejected`ë¡œ ë³€ê²½ë˜ë©´ `.catch` ì— ì „ë‹¬ëœ í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤. ì¦‰, ì¼ë‹¨ promise ë¥¼ ë§Œë“  í›„ ë¹„ë™ê¸° ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ `.then` í•¨ìˆ˜ì„ ì „ë‹¬í•©ë‹ˆë‹¤. ë¹„ë™ê¸° ìš”ì²­ì´ ì‹¤íŒ¨í•˜ë©´ `.catch` í•¨ìˆ˜ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.

ì˜ˆì œë¥¼ ì‚´í´ ë³´ê² ìŠµë‹ˆë‹¤. `setTimeout`ì„ ë‹¤ì‹œ ì‚¬ìš©í•˜ì—¬ 2 ì´ˆ í›„ ì´í–‰í•  promise ì˜ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤(2000 ë°€ë¦¬ì´ˆ).

```javascript
function onSuccess() {
  console.log('Success!')
}

function onError() {
  console.log('ğŸ’©')
}

const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve()
  }, 2000)
})

promise.then(onSuccess)
promise.catch(onError)
```

ìœ„ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì•½ 2 ì´ˆ í›„ì— ì½˜ì†”ì— "ì„±ê³µ!"ì´ë¼ê³  í‘œì‹œë©ë‹ˆë‹¤. ë‹¤ì‹œ ì´ëŸ° ì¼ì´ ì¼ì–´ë‚˜ëŠ” ì´ìœ ëŠ” ë‘ ê°€ì§€ ë•Œë¬¸ì…ë‹ˆë‹¤. ì²«ì§¸, promise ë¥¼ ë§Œë“¤ì—ˆì„ ë•Œ ~ 2000 ë°€ë¦¬ ì´ˆ í›„ì— `resolve`í•  ê²ƒì„ ìš”ì²­í–ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ promise ì˜ ìƒíƒœê°€ `fulfilled`ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ë‘˜ì§¸, `onSuccess` í•¨ìˆ˜ë¥¼ promise ì˜ `.then` ë©”ì†Œë“œì— ì „ë‹¬í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìš°ë¦¬ëŠ” promise ì˜ ìƒíƒœê°€ ì•½ 2,000 ë°€ë¦¬ì´ˆ í›„ `fulfilled`ë¡œ ë³€ê²½ë˜ì—ˆì„ ë•Œ `onSuccess`ë¥¼ í˜¸ì¶œí•˜ê² ë‹¤ëŠ” ì•½ì†ì„ í–ˆìŠµë‹ˆë‹¤.

ì ì´ì œ ë­”ê°€ ë‚˜ìœ ì¼ì´ ì¼ì–´ë‚œ ê²ƒì²˜ëŸ¼ í•˜ê³ ì promise ì˜ ìƒíƒœë¥¼ `rejected`í•˜ê¸°ë¡œ ë³€ê²½í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. `resolve`ë¥¼ í˜¸ì¶œí•˜ëŠ” ëŒ€ì‹  `reject`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

```javascript
function onSuccess() {
  console.log('Success!')
}

function onError() {
  console.log('ğŸ’©')
}

const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    reject()
  }, 2000)
})

promise.then(onSuccess)
promise.catch(onError)
```

ì´ë²ˆì—ëŠ” `onSuccess` í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ëŒ€ì‹  `reject`ë¥¼ í˜¸ì¶œ í•œ ì´í›„ `onError` í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.

---

ì´ì œ Promise API ì— ëŒ€í•´ ì•Œì•˜ìœ¼ë¯€ë¡œ ì‹¤ì œ ì½”ë“œë¥¼ ì‚´í´ ë³´ë„ë¡í•˜ê² ìŠµë‹ˆë‹¤.

ì´ì „ì— ë³¸ ë§ˆì§€ë§‰ ë¹„ë™ê¸° ì½œë°± ì˜ˆì œë¥¼ ê¸°ì–µí•˜ì‹­ë‹ˆê¹Œ?

```javascript
function getUser(id, onSuccess, onFailure) {
  $.getJSON({
    url: `https://api.github.com/users/${id}`,
    success: onSuccess,
    error: onFailure,
  })
}

function getWeather(user, onSuccess, onFailure) {
  $.getJSON({
    url: getLocationURL(user.location.split(',')),
    success: onSuccess,
    error: onFailure,
  })
}

$('#btn').on('click', () => {
  getUser(
    'tylermcginnis',
    user => {
      getWeather(
        user,
        weather => {
          updateUI({
            user,
            weather: weather.query.results,
          })
        },
        showError
      )
    },
    showError
  )
})
```

ì½œë°± ëŒ€ì‹  Promise API ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œìš”? AJAX ìš”ì²­ì„ promise ì•ˆì— ë„£ìœ¼ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ìš”ì²­ì´ ì–´ë–»ê²Œ ì§„í–‰ë˜ëŠ”ì§€ì— ë”°ë¼ ê°„ë‹¨íˆ `resolve`í•˜ê±°ë‚˜ `reject`í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `getUser`ë¡œ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.

```javascript
function getUser(id) {
  return new Promise((resolve, reject) => {
    $.getJSON({
      url: `https://api.github.com/users/${id}`,
      success: resolve,
      error: reject,
    })
  })
}
```

ì¢‹ìŠµë‹ˆë‹¤. `getUser`ì˜ ë§¤ê°œ ë³€ìˆ˜ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. `id`, `onSuccess` ë° `onFailure`ë¥¼ ë°›ëŠ” ëŒ€ì‹  `id`ë§Œ ë°›ìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë” ì´ìƒ í†µì œë¥¼ ë’¤ì§‘ì§€ ì•Šê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ë‘ ì½œë°± í•¨ìˆ˜ê°€ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  Promise `resolve`ì™€ `reject` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ìš”ì²­ì´ ì„±ê³µí•˜ë©´ `resolve`ê°€ í˜¸ì¶œë˜ê³ , ì˜¤ë¥˜ê°€ ìˆìœ¼ë©´ `reject`ë¥¼ í˜¸ì¶œë©ë‹ˆë‹¤.

ë‹¤ìŒì€ `getWeather`ë¥¼ ë¦¬íŒ©í„°ë§ì„ í•´ë´…ì‹œë‹¤. ìš°ë¦¬ëŠ” ì—¬ê¸°ì„œ ê°™ì€ ì „ëµì„ ë”°ë¥¼ ê²ƒì´ë‹¤. `onSuccess` ë° `onFailure` ì½œë°± í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹  `resolve` ë° `reject`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```javascript
function getWeather(user) {
  return new Promise((resolve, reject) => {
    $.getJSON({
      url: getLocationURL(user.location.split(',')),
      success: resolve,
      error: reject,
    })
  })
}
```

ì¢‹ì•„ ë³´ì´ë„¤ìš”. ì´ì œ ë§ˆì§€ë§‰ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•´ì•¼ í•  ê²ƒì€ í´ë¦­ í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤. ê¸°ì–µí•˜ì„¸ìš”, ì—¬ê¸° ìš°ë¦¬ê°€ ì›í•˜ëŠ” íë¦„ì´ ìˆìŠµë‹ˆë‹¤.

1. Github API ì—ì„œ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
2. ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ â€‹â€‹ ì‚¬ìš©í•˜ì—¬ Yahoo Weather API ì—ì„œ ë‚ ì”¨ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
3. ì‚¬ìš©ì ì •ë³´ì™€ ë‚ ì”¨ë¡œ UI ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

\#1 ë¶€í„° ì‹œì‘í•´ ë´…ì‹œë‹¤. - Github API ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

```javascript
$('#btn').on('click', () => {
  const userPromise = getUser('tylermcginnis')

  userPromise.then(user => {})

  userPromise.catch(showError)
})
```

ë‘ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” `getUser` ëŒ€ì‹  ì´ì œëŠ” `.then` ë° `.catch`ë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆëŠ” promise ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ê²ƒì€ ì‚¬ìš©ìì˜ ì •ë³´ì™€ í•¨ê»˜ í˜¸ì¶œë©ë‹ˆë‹¤. `.catch`ê°€ í˜¸ì¶œë˜ë©´ ì˜¤ë¥˜ì™€ í•¨ê»˜ í˜¸ì¶œë©ë‹ˆë‹¤.

ë‹¤ìŒì€ #2 ë¥¼ í• ê¹Œìš”? - ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚ ì”¨ë¥¼ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

```javascript
$('#btn').on('click', () => {
  const userPromise = getUser('tylermcginnis')

  userPromise.then(user => {
    const weatherPromise = getWeather(user)
    weatherPromise.then(weather => {})

    weatherPromise.catch(showError)
  })

  userPromise.catch(showError)
})
```

ìš°ë¦¬ê°€ #1 ì—ì„œ í–ˆë˜ íŒ¨í„´ê³¼ ì •í™•íˆ ë˜‘ê°™ì€ íŒ¨í„´ì„ ë”°ë¥´ì§€ë§Œ ì´ì œëŠ” `userPromise`ì—ì„œ ì–»ì€ ì‚¬ìš©ì ê°ì²´ë¥¼ ì „ë‹¬í•˜ëŠ” `getWeather`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ, #3 - ì‚¬ìš©ì ì •ë³´ì™€ ë‚ ì”¨ë¡œ UI ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

```javascript
$('#btn').on('click', () => {
  const userPromise = getUser('tylermcginnis')

  userPromise.then(user => {
    const weatherPromise = getWeather(user)
    weatherPromise.then(weather => {
      updateUI({
        user,
        weather: weather.query.results,
      })
    })

    weatherPromise.catch(showError)
  })

  userPromise.catch(showError)
})
```

ì—¬ê¸° ë‹¹ì‹ ì´ ê°€ì§€ê³  ë†€ ìˆ˜ ìˆëŠ” [ì „ì²´ ì½”ë“œ](https://codesandbox.io/s/l9xrjq88p7)ê°€ ìˆìŠµë‹ˆë‹¤.

ìƒˆë¡œìš´ ì½”ë“œê°€ _ë”_ ì¢‹ì§€ë§Œ ì•„ì§ ê°œì„  í•  ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê°œì„  ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ì „ì— `resolve`ì—ì„œ `then`ë¡œ ì¸ìˆ˜ë¥¼ ì—°ê²°í•˜ê³  ì „ë‹¬í•´ì•¼ í•˜ëŠ” ë‘ ê°€ì§€ ì¶”ê°€ ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.

## Chaining

`.then` ì™€ `.catch` ëŠ” ëª¨ë‘ ìƒˆë¡œìš´ ì•½ì†ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì‘ì€ ì„¸ë¶€ ì‚¬í•­ì²˜ëŸ¼ ë³´ì´ì§€ë§Œ promise ë“¤ì€ ì²´ì´ë‹í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì¤‘ìš”í•©ë‹ˆë‹¤. ì•„ë˜ ì˜ˆì œì—ì„œ ìš°ë¦¬ `getPromise`ëŠ” ì ì–´ë„ 2000 ë°€ë¦¬ ì´ˆ ë‚´ì— í•´ê²°í•  ìˆ˜ ìˆëŠ” promise ë¥¼ ìš°ë¦¬ì—ê²Œ ëŒë ¤ì¤ë‹ˆë‹¤. ê±°ê¸°ì—ì„œ `.then`ëŠ” promise ë¥¼ ë˜ëŒë¦´ ê²ƒì´ê¸° ë•Œë¬¸ì— .catch ë©”ì†Œë“œì— ì˜í•´ ì¡íŒ `new Error` ë¥¼ ë˜ì§ˆ ë•Œê¹Œì§€ ìš°ë¦¬ì˜ `.thens` ë¥¼ ê³„ì†í•´ì„œ ë¬¶ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
function getPromise() {
  return new Promise(resolve => {
    setTimeout(resolve, 2000)
  })
}

function logA() {
  console.log('A')
}

function logB() {
  console.log('B')
}

function logCAndThrow() {
  console.log('C')

  throw new Error()
}

function catchError() {
  console.log('Error!')
}

getPromise()
  .then(logA) // A
  .then(logB) // B
  .then(logCAndThrow) // C
  .catch(catchError) // Error!
```

ì¢‹ì•„ìš”, ê·¸ëŸ°ë° ì´ê²Œ ì™œ ê·¸ë ‡ê²Œ ì¤‘ìš”í•˜ì£ ? ì½œë°± ì„¹ì…˜ì—ì„œ ìš°ë¦¬ê°€ ì½œë°±ì˜ ë‹¨ì  ì¤‘ í•˜ë‚˜ì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ë©´ì„œ ì½œë°± ì„¹ì…˜ì—ì„œ ìì—°ìŠ¤ëŸ½ê³  ìˆœì°¨ì ì¸ ì‚¬ê³  ë°©ì‹ì—ì„œ ë²—ì–´ë‚˜ë„ë¡ ê°•ìš”í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ì‹­ì‹œì˜¤. promise ë“¤ì„ ì—°ì‡„ ì ìœ¼ë¡œ ì—°ê²°í•˜ë©´ ì—°ì‡„ëœ promise ë“¤ì´ ìˆœì°¨ì ì´ê¸° ë•Œë¬¸ì— ìì—°ìŠ¤ëŸ¬ìš´ ì‚¬ê³  ë°©ì‹ì—ì„œ ë²—ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. `getPromiseê°€ ì‹¤í–‰ë˜ë©´ logAê°€ ì‹¤í–‰ë˜ê³  logBê°€ ì‹¤í–‰ë˜ê³ ...`

í•œ ê°€ì§€ ì˜ˆë¥¼ ë³´ìë©´, `fetch` API ë¥¼ ì‚¬ìš©í•  ë•Œ ì¼ë°˜ì ì¸ ì‚¬ìš© ì‚¬ë¡€ê°€ ìˆìŠµë‹ˆë‹¤. `fetch`ëŠ” HTTP ì‘ë‹µìœ¼ë¡œ resolve í•  promise ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì‹¤ì œ JSON ì„ ì–»ìœ¼ë ¤ë©´ `.json`ì„ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤. ì²´ì´ë‹ìœ¼ë¡œ ì¸í•´ ìš°ë¦¬ëŠ” ì´ê²ƒì— ëŒ€í•´ ìˆœì°¨ì ìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆë‹¤.

```javascript
fetch('/api/user.json')
  .then(response => response.json())
  .then(user => {
    // ì´ì œ ì‚¬ìš©ìê°€ ì‹œì‘í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.
  })
```

ì´ì œ ì²´ì´ë‹ì— ëŒ€í•´ ì•Œì•˜ìœ¼ë‹ˆ ì´ì „ì— `getUser` / `getWeather` ì½”ë“œë¥¼ ë¦¬í™í† ë§í•˜ì—¬ ì‚¬ìš©í•´ë³´ì£ .

```javascript
function getUser(id) {
  return new Promise((resolve, reject) => {
    $.getJSON({
      url: `https://api.github.com/users/${id}`,
      success: resolve,
      error: reject,
    })
  })
}

function getWeather(user) {
  return new Promise((resolve, reject) => {
    $.getJSON({
      url: getLocationURL(user.location.split(',')),
      success: resolve,
      error: reject,
    })
  })
}

$('#btn').on('click', () => {
  getUser('tylermcginnis')
    .then(getWeather)
    .then(weather => {
      // ì‚¬ìš©ìì™€ ë‚ ì”¨ê°€ ëª¨ë‘ í•„ìš”í•©ë‹ˆë‹¤.
      // ì§€ê¸ˆ ìš°ë¦¬ëŠ” ë‹¨ì§€ ë‚ ì”¨ë§Œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
      updateUI() // ????
    })
    .catch(showError)
})
```

í›¨ì”¬ ì¢‹ì•„ ë³´ì´ì§€ë§Œ ì§€ê¸ˆì€ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì„ ë°œê²¬ í•  ìˆ˜ ìˆìŠµë‹ˆê¹Œ? ë‘ ë²ˆì§¸ `.then`ì—ì„œ `updateUI`ë¥¼ í˜¸ì¶œí•˜ë ¤ê³  í•©ë‹ˆë‹¤. ë¬¸ì œëŠ”`updateUI`ì— `user`ì™€ `weather`ë¥¼ ëª¨ë‘ ì „ë‹¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì–´ì°Œë˜ì—ˆë“  ìš°ë¦¬ëŠ” `getWeather`ê°€ `user`ì™€ `weather`ë‘˜ ë‹¤ í•¨ê»˜ í•´ê²°ë˜ë„ë¡ promise ë¥¼ ë§Œë“¤ ë°©ë²•ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.

ì—¬ê¸° ì—´ì‡ ê°€ ìˆìŠµë‹ˆë‹¤. `resolve`ëŠ” ë‹¨ì§€ í•¨ìˆ˜ì¼ ë¿ì…ë‹ˆë‹¤. ì „ë‹¬í•œ ëª¨ë“  ì¸ìˆ˜ëŠ” `.then`ì— ì£¼ì–´ì§„ í•¨ìˆ˜ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ì´ê²ƒì´ ì˜ë¯¸í•˜ëŠ” ë°”ëŠ” `getWeather` ë‚´ë¶€ì—ì„œ `resolve`ë¥¼ í˜¸ì¶œí•˜ë©´ `weather`ì™€ `user`ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì²´ì¸ì˜ ë‘ ë²ˆì§¸ `.then` ë©”ì†Œë“œëŠ” `user`ì™€ `weather`ë¥¼ ì¸ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤.

```javascript
function getWeather(user) {
  return new Promise((resolve, reject) => {
    $.getJSON({
      url: getLocationURL(user.location.split(',')),
      success(weather) {
        resolve({ user, weather: weather.query.results })
      },
      error: reject,
    })
  })
}

$('#btn').on('click', () => {
  getUser('tylermcginnis')
    .then(getWeather)
    .then(data => {
      // ì´ì œ ë°ì´í„°ëŠ” "weather" ì†ì„±ê³¼ "user" ì†ì„±ì„ ê°€ì§„ ê°ì²´ì…ë‹ˆë‹¤.

      updateUI(data)
    })
    .catch(showError)
})
```

ì—¬ê¸°ì„œ [ìµœì¢… ì½”ë“œ](https://codesandbox.io/s/9lkl75vqxw)ë¥¼ ê°€ì§€ê³  ë†€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í´ë¦­ í•¸ë“¤ëŸ¬ì—ì„œ ì½œë°±ì— ë¹„í•´ promise ì˜ í˜ì„ ì‹¤ì œë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
// Callbacks ğŸš«
getUser(
  'tylermcginnis',
  user => {
    getWeather(
      user,
      weather => {
        updateUI({
          user,
          weather: weather.query.results,
        })
      },
      showError
    )
  },
  showError
)

// Promises âœ…
getUser('tylermcginnis')
  .then(getWeather)
  .then(data => updateUI(data))
  .catch(showError)
```

ê·¸ ë…¼ë¦¬ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ëŠê»´ì§€ëŠ” ì´ìœ ëŠ” ê·¸ê²ƒì´ ìš°ë¦¬ê°€ ì‚¬ê³ í•˜ëŠ” ë° ìµìˆ™í–ˆë˜ ë°©ì‹ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. `getUser ë‹¤ìŒì—ëŠ” getWeatherì˜ ë°ì´í„°ë¡œ UIë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.`

---

ì´ì œ ìš°ë¦¬ ë¹„ë™ê¸° ì½”ë“œì˜ ê°€ë…ì„±ì´ í¬ê²Œ í–¥ìƒ ë  ê²ƒì´ í™•ì‹¤í•˜ì§€ë§Œ, ë” ë‚˜ì€ ë°©ë²•ì„ ì°¾ì„ ìˆ˜ ìˆì„ê¹Œìš”? TC39 ìœ„ì›íšŒì—ì„œ JavaScript ì–¸ì–´ì— ìƒˆ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê¶Œí•œì„ ë‹¹ì‹ ì´ ê°€ì§€ê³  ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤. ì´ ì½”ë“œë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ ì–´ë–¤ ì¡°ì¹˜ë¥¼ ì·¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?

```javascript
$('#btn').on('click', () => {
  getUser('tylermcginnis')
    .then(getWeather)
    .then(data => updateUI(data))
    .catch(showError)
})
```

ìš°ë¦¬ê°€ ë…¼ì˜í–ˆë“¯ì´, ì´ ì½”ë“œëŠ” ê½¤ ì˜ ì½í™ë‹ˆë‹¤. ìš°ë¦¬ì˜ ë‘ë‡Œê°€ ì‘ë™í•˜ëŠ” ê²ƒì²˜ëŸ¼ ìˆœì°¨ì ì¸ ìˆœì„œë¡œ ì§„í–‰ë©ë‹ˆë‹¤. ìš°ë¦¬ê°€ ë§ˆì£¼í•œ í•œ ê°€ì§€ ë¬¸ì œëŠ” ì²« ë²ˆì§¸ ë¹„ë™ê¸°ì‹ ìš”ì²­ë¶€í„° ë§ˆì§€ë§‰ `.then`ê¹Œì§€ ë°ì´í„°(`users`)ë¥¼ ì „ë‹¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ í° ë¬¸ì œëŠ” ì•„ë‹ˆì§€ë§Œ `users`ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ getWeather í•¨ìˆ˜ë¥¼ ë³€ê²½í–ˆìŠµë‹ˆë‹¤. ë™ê¸° ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ë¹„ë™ê¸° ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ìš°ë¦¬ê°€ ê·¸ë ‡ê²Œ í–ˆë‹¤ë©´, ê·¸ ë¬¸ì œëŠ” ì™„ì „íˆ ì‚¬ë¼ì§ˆ ê²ƒì´ê³  ê·¸ê²ƒì€ ì—¬ì „íˆ â€‹â€‹ ìˆœì°¨ì ìœ¼ë¡œ ì½í˜€ì§ˆ ê²ƒì…ë‹ˆë‹¤. ì—¬ê¸°ì— ì•„ì´ë””ì–´ê°€ ìˆìŠµë‹ˆë‹¤.

```javascript
$('#btn').on('click', () => {
  const user = getUser('tylermcginnis')
  const weather = getWeather(user)

  updateUI({
    user,
    weather,
  })
})
```

ê·¸ëŸ¼ ì¢‹ê² êµ°ìš”. ë¹„ë™ê¸° ì½”ë“œëŠ” ë™ê¸° ì½”ë“œì™€ ë˜‘ê°™ì€ ëª¨ì–‘ì…ë‹ˆë‹¤. ìš°ë¦¬ê°€ ì´ë¯¸ ì´ëŸ° ì‚¬ê³  ë°©ì‹ì„ ì˜ ì•Œê³  ìˆê¸° ë•Œë¬¸ì— ìš°ë¦¬ì˜ ë‘ë‡Œê°€ í•„ìš”ë¡œí•˜ëŠ” ì¶”ê°€ ë‹¨ê³„ê°€ ì—†ìŠµë‹ˆë‹¤. ìŠ¬í”„ê²Œë„, ì´ê²ƒì€ ë¶„ëª…íˆ ì‘ë™í•˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤. ì•„ì‹œë‹¤ì‹œí”¼, ìœ„ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ `getUser`ì™€ `getWeather`ê°€ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— `user`ì™€ `weather` ëª¨ë‘ `promise`ì¼ ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ê¸°ì–µí•˜ì„¸ìš”, ìš°ë¦¬ëŠ” TC39ì— ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì–¸ì–´ì— ëª¨ë“  ê¸°ëŠ¥ì„ ì¶”ê°€ í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ìˆëŠ” ê·¸ëŒ€ë¡œ, ì´ ì½”ë“œë¥¼ ë™ì‘í•˜ê²Œ í•˜ëŠ” ê²ƒì€ ë§¤ìš° ê¹Œë‹¤ë¡œìš¸ ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì–´ë–»ê²Œ í•´ì„œë“  ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì— ë¹„ë™ê¸° í•¨ìˆ˜ í˜¸ì¶œê³¼ ë™ê¸° í•¨ìˆ˜ í˜¸ì¶œ ê°„ì˜ ì°¨ì´ì ì„ ê°€ë¥´ì³ì•¼ í•©ë‹ˆë‹¤. ì—”ì§„ì—ì„œ ë” ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ëª‡ ê°€ì§€ í‚¤ì›Œë“œë¥¼ ì½”ë“œì— ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤.

ë¨¼ì € ì£¼ìš” í•¨ìˆ˜ ìì²´ì— í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì´ê²ƒì€ ì´ í•¨ìˆ˜ ë‚´ë¶€ì— ë¹„ë™ê¸° í•¨ìˆ˜ í˜¸ì¶œì„ í•  ê²ƒì´ë¼ëŠ” ì‚¬ì‹¤ì„ ì—”ì§„ì— ì•Œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ `async`ë¥¼ ì‚¬ìš©í•©ì‹œë‹¤.

```javascript
$("#btn").on("click", async () => {
  const user = getUser('tylermcginnis')
  const weather = getWeather(user)

  updateUI({
    user,
    weather,
  })
})
```

ì¢‹ë„¤ìš”. ê·¸ëŸ´ ë“¯ í•©ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ ì—”ì§„ì—ì„œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ê°€ ë¹„ë™ê¸°ì´ë©° `promise`ì„ ë˜ëŒë¦¬ëŠ” ì‹œì ì„ ì •í™•íˆ ì•Œ ìˆ˜ ìˆë„ë¡ ë‹¤ë¥¸ í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•´ ë³´ê² ìŠµë‹ˆë‹¤. `await`ë¥¼ ì‚¬ìš©í•©ì‹œë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ, "í—¤ì´ ì—”ì§„. ì´ í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°ì´ë©° promiseì„ ë°˜í™˜í•´. ë‹ˆê°€ ì¼ë°˜ì ìœ¼ë¡œ í•˜ëŠ” ê²ƒì²˜ëŸ¼ ê³„ì†í•˜ëŠ” ëŒ€ì‹ ì— promiseì˜ ê²°ê³¼ ê°’ì„ â€˜awaitâ€™ë¡œ ê°€ì ¸ ê°€ì„œ ê³„ì†í•˜ê¸° ì „ì— ë°˜í™˜í•´ì¤˜". ìƒˆë¡œìš´ `async` ë° `await` í‚¤ì›Œë“œë¥¼ ëª¨ë‘ ì‚¬ìš©í•  ê²½ìš°, ìƒˆë¡œìš´ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
 
```javascript
$("#btn").on("click", async () => {
  const user = await getUser('tylermcginnis')
  const weather = await getWeather(user.location)

  updateUI({
    user,
    weather,
  })
})
```

ê½¤ ë§¤ë„ëŸ½êµ°ìš”. ìš°ë¦¬ëŠ” ë¹„ë™ê¸° ì½”ë“œë¥¼ ë™ê¸°ì‹ì²˜ëŸ¼ ë³´ì´ê²Œí•˜ëŠ” í•©ë¦¬ì ì¸ ë°©ë²•ì„ ê³ ì•ˆí–ˆìŠµë‹ˆë‹¤. ì´ì œ ë‹¤ìŒ ë‹¨ê³„ëŠ” ì‹¤ì œë¡œ TC39ì˜ ëˆ„êµ°ê°€ì—ê²Œ ì´ê²ƒì´ ì¢‹ì€ ìƒê°ì´ë¼ê³  í™•ì‹ ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤í–‰íˆë„ ì§€ê¸ˆì¯¤ ì§ì‘í•˜ì…¨ê² ì§€ë§Œ, ì´ ê¸°ëŠ¥ì€ ì´ë¯¸ JavaScriptì˜ ì¼ë¶€ì´ë©° `Async/Await`ë¼ê³  ë¶ˆë¦¬ê¸° ë•Œë¬¸ì— ë” ì´ìƒ ì„¤ë“í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

ì ˆ ë¯¿ì§€ ì•Šìœ¼ì‹œë‚˜ìš”? Async/Awaitì„ ì¶”ê°€ í•œ [ë¼ì´ë¸Œ ì½”ë“œê°€ ì—¬ê¸°](https://codesandbox.io/s/00w10o19xn) ìˆìŠµë‹ˆë‹¤. ì–¼ë§ˆë“ ì§€ ê°€ì§€ê³  ë…¸ì„¸ìš”.

---

## async í•¨ìˆ˜ëŠ” promiseì„ ë°˜í™˜í•©ë‹ˆë‹¤.

ì´ì œ Async/Awaitì˜ ì´ì ì„ ì‚´í´ ë³´ì•˜ìœ¼ë¯€ë¡œ ì•Œì•„ ë‘ì–´ì•¼ í•  ì¤‘ìš”í•œ ì„¸ë¶€ ì •ë³´ë¥¼ ì‚´í´ ë³´ê² ìŠµë‹ˆë‹¤. ì²«ì§¸, í•¨ìˆ˜ì— `async`ë¥¼ ì¶”ê°€ í•  ë•Œ ì´ í•¨ìˆ˜ëŠ” ì•”ì‹œ ì ìœ¼ë¡œ promiseì„ ë°˜í™˜í•©ë‹ˆë‹¤.

```javascript
async function getPromise(){}

const promise = getPromise()
```

`getPromise`ëŠ” ë¬¸ì ê·¸ëŒ€ë¡œ ë¹„ì–´ ìˆì§€ë§Œ `async` í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ì—¬ì „íˆ promiseì„ ë°˜í™˜í•©ë‹ˆë‹¤.

`async` í•¨ìˆ˜ê°€ ê°’ì„ ë°˜í™˜í•˜ëŠ” ê²½ìš°, ê·¸ ê°’ì€ `promise`ì—ë„ ë˜í•‘ë©ë‹ˆë‹¤. ì¦‰, `.then`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤.

```javascript
async function add (x, y) {
  return x + y
}

add(2,3).then((result) => {
  console.log(result) // 5
})
```

---

## asyncê°€ ì—†ëŠ” awaitëŠ” ë‚˜ì©ë‹ˆë‹¤.

`async`ê°€ ì•„ë‹Œ í•¨ìˆ˜ì—ì„œ `await` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.


```javascript
$("#btn").on("click", () => {
  const user = await getUser('tylermcginnis') // SyntaxError : awaitëŠ” ì˜ˆì•½ì–´ì…ë‹ˆë‹¤.
  const weather = await getWeather(user.location) // SyntaxError : awaitëŠ” ì˜ˆì•½ì–´ì…ë‹ˆë‹¤.

  updateUI({
    user,
    weather,
  })
})
```

ì œê°€ ê·¸ê²ƒì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í•˜ëŠ”ì§€ ë§ì”€ë“œë¦¬ì£ . í•¨ìˆ˜ì— `async`ë¥¼ ì¶”ê°€í•˜ë©´ ë‘ ê°€ì§€ ê¸°ëŠ¥ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤. í•¨ìˆ˜ ìì²´ê°€ promiseë¥¼ ë°˜í™˜(ë˜ëŠ” ë°˜í™˜ëœ ë‚´ìš©ì„ ë˜í•‘)í•˜ê³  í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ `await`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

---

## ì˜¤ë¥˜ ì²˜ë¦¬

ë‹¹ì‹ ì€ ìš°ë¦¬ê°€ ì•½ê°„ ì†ì˜€ë‹¤ëŠ” ê±¸ ëˆˆì¹˜ì±˜ì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤. ìš°ë¦¬ì˜ ì›ë˜ ì½”ë“œì—ëŠ” `.catch`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜¤ë¥˜ë¥¼ ì¡ì„ ìˆ˜ìˆëŠ” ë°©ë²•ì´ ìˆì—ˆìŠµë‹ˆë‹¤. Async/Awaitë¡œ ì „í™˜í–ˆì„ ë•Œ í•´ë‹¹ ì½”ë“œëŠ” ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. Async / Awaitë¥¼ ì‚¬ìš©í•˜ë©´ ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ `try/catch` ë¸”ë¡ì— ì½”ë“œë¥¼ ë˜í•‘í•˜ì—¬ ì˜¤ë¥˜ë¥¼ catchí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```javascript
$("#btn").on("click", async () => {
  try {
    const user = await getUser('tylermcginnis')
    const weather = await getWeather(user.location)

    updateUI({
      user,
      weather,
    })
  } catch (e) {
    showError(e)
  }
})
```